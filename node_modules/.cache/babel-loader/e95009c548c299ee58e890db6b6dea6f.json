{"ast":null,"code":"import _slicedToArray from\"D:/abra/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Classes from\"./currentweather.module.css\";import FavoritesButton from\"../../UI/favoritesButton/favoritesButton\";import Loading from\"../../UI/loading/loading\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Currentweather=function Currentweather(props){var dispach=useDispatch();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var location=useSelector(function(state){return state.location;});var storedData=useSelector(function(state){return state.currentWheather[location.key];});useEffect(function(){if(storedData!==undefined){setData(storedData);}else if(location.key!==undefined){fetch(\"http://dataservice.accuweather.com/currentconditions/v1/\".concat(location.key,\"?apikey=vHiCdzBf9ay1yTDR04546BFGIZDDIq4s\")).then(function(res){return res.json();}).then(function(res){var icon=res[0].WeatherIcon;if(icon<10){icon=\"0\"+icon;}var requiredDetails={temperature:res[0].Temperature.Metric.Value,WeatherText:res[0].WeatherText,icon:icon,city:location.city,key:location.key};setData(requiredDetails);dispach({type:\"AddCurrentWheather\",payload:{key:location.key,data:requiredDetails}});}).catch(function(err){dispach({type:\"alert\"});});}},[location]);return/*#__PURE__*/_jsxs(\"div\",{className:Classes.currentweather,children:[/*#__PURE__*/_jsx(FavoritesButton,{id:location.key,city:location.city}),/*#__PURE__*/_jsx(\"div\",{className:Classes.NextWeek}),/*#__PURE__*/_jsx(\"h1\",{children:data.city}),/*#__PURE__*/_jsxs(\"div\",{className:Classes.temperature,children:[data.temperature,\"\\u2103\"]}),/*#__PURE__*/_jsx(\"img\",{src:\"https://developer.accuweather.com/sites/default/files/\".concat(data.icon,\"-s.png\"),loading:\"lazy\",alt:\"icon\"}),/*#__PURE__*/_jsx(\"h2\",{children:data.WeatherText}),data===undefined&&/*#__PURE__*/_jsx(Loading,{})]});};export default Currentweather;","map":{"version":3,"sources":["D:/abra/src/components/mainPage/currentweather/currentweather.js"],"names":["Classes","FavoritesButton","Loading","useEffect","useState","useDispatch","useSelector","Currentweather","props","dispach","data","setData","location","state","storedData","currentWheather","key","undefined","fetch","then","res","json","icon","WeatherIcon","requiredDetails","temperature","Temperature","Metric","Value","WeatherText","city","type","payload","catch","err","currentweather","NextWeek"],"mappings":"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","sourcesContent":["import Classes from \"./currentweather.module.css\";\r\nimport FavoritesButton from \"../../UI/favoritesButton/favoritesButton\";\r\nimport Loading from \"../../UI/loading/loading\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nconst Currentweather = (props) => {\r\n  const dispach = useDispatch();\r\n  const [data, setData] = useState({});\r\n  const location = useSelector((state) => {\r\n    return state.location;\r\n  });\r\n  const storedData = useSelector((state) => {\r\n    return state.currentWheather[location.key];\r\n  });\r\n  useEffect(() => {\r\n    if (storedData !== undefined) {\r\n      setData(storedData);\r\n    } else if (location.key !== undefined) {\r\n      fetch(\r\n        `http://dataservice.accuweather.com/currentconditions/v1/${location.key}?apikey=vHiCdzBf9ay1yTDR04546BFGIZDDIq4s`\r\n      )\r\n        .then((res) => {\r\n          return res.json();\r\n        })\r\n        .then((res) => {\r\n          let icon = res[0].WeatherIcon;\r\n          if (icon < 10) {\r\n            icon = \"0\" + icon;\r\n          }\r\n          let requiredDetails = {\r\n            temperature: res[0].Temperature.Metric.Value,\r\n            WeatherText: res[0].WeatherText,\r\n            icon: icon,\r\n            city: location.city,\r\n            key: location.key,\r\n          };\r\n          setData(requiredDetails);\r\n          dispach({\r\n            type: \"AddCurrentWheather\",\r\n            payload: { key: location.key, data: requiredDetails },\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          dispach({ type: \"alert\" });\r\n        });\r\n    }\r\n  }, [location]);\r\n\r\n  return (\r\n    <div className={Classes.currentweather}>\r\n      <FavoritesButton id={location.key} city={location.city} />\r\n      <div className={Classes.NextWeek}></div>\r\n      <h1>{data.city}</h1>\r\n      <div className={Classes.temperature}>{data.temperature}&#8451;</div>\r\n      <img\r\n        src={`https://developer.accuweather.com/sites/default/files/${data.icon}-s.png`}\r\n        loading=\"lazy\"\r\n        alt=\"icon\"\r\n      ></img>\r\n      <h2>{data.WeatherText}</h2>\r\n      {data === undefined && <Loading />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Currentweather;\r\n"]},"metadata":{},"sourceType":"module"}